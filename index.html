<html>
<head>
    <title>Canvas Fingerprinting Demo</title>
    <script src="fingerprinting/fingerprint.js"></script>
    <script src="hash/murmurhash3.js"></script>
    <script src="hash/java_hashcode.js"></script>
</head>
<body>

<div style="text-align: center;">
    <h3 style="margin-top: 60px">Fingerprint with drawing canvas</h3>
    <h1 id="withCanvasDrawing"></h1>
</div>
<div style="text-align: center;">
    <h3 style="margin-top: 20px">Fingerprint without drawing canvas and murmur3 hash function, metadata only:</h3>
    <h1 id="withoutCanvasDrawing"></h1>
</div>

<div style="text-align: center;">
    <h3 style="margin-top: 20px">Fingerprint without drawing canvas and Java's hashcode hash function, metadata
        only:
    </h3>
    <h1 id="fingerPrintWithJavaHashCode"></h1>
</div>

<script>
    var withCanvasDrawing = new Fingerprint({canvas: true});
    var withoutCanvasDrawing = new Fingerprint({canvas: false});
    var javaHashFunction = new Fingerprint({hasher: javaHashCode});

    document.getElementById('withCanvasDrawing').innerHTML = withCanvasDrawing.get();
    document.getElementById('withoutCanvasDrawing').innerHTML = withoutCanvasDrawing.get();
    document.getElementById('fingerPrintWithJavaHashCode').innerHTML = javaHashFunction.get();
</script>
   <style type="text/css">
  	canvas {border: 1px solid black;}
  	pre {white-space:	pre-wrap; width: 80%; word-wrap: break-word;}
  </style>
 </head>
 <body>
	<pre id="output">Output</pre>
 	<pre id="hash">Hash</pre>
	<script type="text/javascript">
		String.prototype.hashCode = function() {
		  var hash = 0, i, chr, len;
		  if (this.length == 0) return hash;
		  for (i = 0, len = this.length; i < len; i++) {
		    chr   = this.charCodeAt(i);
		    hash  = ((hash << 5) - hash) + chr;
		    hash |= 0;
		  }
		  return hash;
		};

		var canvas = document.createElement("canvas");
		var context = canvas.getContext("2d");
		//context.font = "18pt Arial";
		context.fillText("Do I know you? \ud83d\ude03", 20, 20);
		var dataURL = canvas.toDataURL("image/png").substr("data:image/png;base64,".length);
		document.getElementById("output").innerHTML = dataURL;
		document.getElementById("hash").innerHTML = "Hash: " + dataURL.hashCode();
		document.body.appendChild(canvas);

	</script>
</body>
</html>
